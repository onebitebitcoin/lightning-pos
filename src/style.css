@tailwind base;
@tailwind components;
@tailwind utilities;

/* Modern base styles */
@layer base {
  :root {
    /* Surfaces */
    --bg-primary: 255 255 255;          /* pure white */
    --bg-secondary: 243 249 255;        /* blue-50 */
    --bg-tertiary: 230 241 255;         /* blue-100 */
    --app-bg-gradient: linear-gradient(180deg, #ffffff 0%, #f1f5ff 45%, #dbe8ff 100%);
    --glass-surface: rgba(255, 255, 255, 0.92);
    --glass-card: rgba(255, 255, 255, 0.95);
    --glass-header: rgba(255, 255, 255, 0.96);

    /* Text */
    --text-primary: 15 23 42;           /* slate-900 */
    --text-secondary: 100 116 139;      /* slate-500 */
    --text-disabled: 148 163 184;       /* slate-400 */

    /* Borders */
    --border-primary: 223 233 248;      /* blue-200 */
    --border-secondary: 201 218 243;    /* blue-300 */

    /* Accents */
    --accent: 37 99 235;                /* primary-600 */
    --brand-accent-rgb: 37, 99, 235;
    --glass-border-rgb: 154, 176, 214;
    --glass-shadow: 0 25px 50px rgba(15, 23, 42, 0.08);
  }

  .dark {
    /* Surfaces */
    --bg-primary: 11 20 35;             /* deep navy */
    --bg-secondary: 6 12 24;            /* almost black-blue */
    --bg-tertiary: 18 30 53;            /* muted navy */
    --app-bg-gradient: linear-gradient(180deg, #050b18 0%, #08152b 50%, #0d2042 100%);
    --glass-surface: rgba(8, 18, 34, 0.8);
    --glass-card: rgba(13, 24, 45, 0.85);
    --glass-header: linear-gradient(120deg, rgba(8, 16, 32, 0.92) 0%, rgba(10, 26, 52, 0.9) 55%, rgba(6, 14, 30, 0.92) 100%);

    /* Text */
    --text-primary: 232 238 255;        /* ice blue */
    --text-secondary: 170 188 228;      /* muted blue */
    --text-disabled: 130 150 190;       /* pale blue */

    /* Borders */
    --border-primary: 32 49 78;         /* navy border */
    --border-secondary: 45 65 101;      /* lighter navy */

    /* Accents */
    --accent: 96 165 250;               /* primary-400 */
    --brand-accent-rgb: 96, 165, 250;
    --glass-border-rgb: 52, 78, 126;
    --glass-shadow: 0 30px 55px rgba(3, 6, 15, 0.6);
  }
  html {
    scroll-behavior: smooth;
  }
  
  body {
    font-feature-settings: 'rlig' 1, 'calt' 1;
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    background-image: var(--app-bg-gradient);
    background-color: rgb(var(--bg-secondary));
    color: rgb(var(--text-primary));
    min-height: 100vh;
    overflow-x: hidden;
  }
}

/* Modern component styles */
@layer components {
  /* Inputs aligned to semantic surfaces */
  .form-input {
    @apply w-full px-4 py-3 rounded-xl border border-border-primary bg-bg-primary text-text-primary placeholder:text-text-disabled focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200;
  }

  /* Danger button */
  .btn-danger {
    @apply bg-error-600 hover:bg-error-700 focus:ring-error-500 text-white shadow-soft hover:shadow-medium;
  }

  /* Category chip button */
  .btn-category {
    @apply px-3 py-1.5 rounded-full border border-border-secondary text-text-secondary bg-bg-primary hover:text-text-primary hover:border-border-primary transition-colors;
  }
  .btn-category.active {
    @apply bg-primary-50 text-primary-700 border-primary-300 dark:bg-primary-900/30 dark:text-primary-200 dark:border-primary-700;
  }

  /* Quantity stepper button */
  .btn-quantity {
    @apply w-8 h-8 inline-flex items-center justify-center rounded-lg bg-bg-secondary hover:bg-bg-tertiary border border-border-primary text-text-primary touch-target;
  }

  /* Payment option card */
  .payment-option {
    @apply rounded-2xl p-4 hover:border-primary-300 hover:shadow-soft transition-all cursor-pointer;
    background: var(--glass-card);
    border: 1px solid rgba(var(--glass-border-rgb), 0.35);
    backdrop-filter: blur(12px);
  }
  .payment-option.active {
    @apply ring-2 ring-primary-500 ring-offset-2; 
  }

  .glass-panel {
    background: var(--glass-surface);
    border: 1px solid rgba(var(--glass-border-rgb), 0.3);
    box-shadow: var(--glass-shadow);
    backdrop-filter: blur(18px);
  }

  .glass-header {
    background: var(--glass-header);
    border-bottom: 1px solid rgba(var(--glass-border-rgb), 0.35);
    box-shadow: 0 18px 35px rgba(var(--brand-accent-rgb), 0.18);
    backdrop-filter: blur(18px);
  }

  /* Modern card component */
  .card {
    @apply rounded-2xl shadow-soft border border-transparent transition-all duration-200;
    background: var(--glass-card);
    border-color: rgba(var(--glass-border-rgb), 0.25);
    backdrop-filter: blur(16px);
  }
  
  .card-hover {
    @apply hover:shadow-medium hover:border-gray-200 dark:hover:border-gray-600/50 hover:-translate-y-0.5;
  }
  
  /* Modern button variants */
  .btn {
    @apply inline-flex items-center justify-center font-medium rounded-xl transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed;
  }
  
  .btn-primary {
    @apply bg-primary-600 hover:bg-primary-700 focus:ring-primary-500 text-white shadow-soft hover:shadow-medium;
  }
  
  .btn-success {
    @apply bg-primary-600 hover:bg-primary-700 focus:ring-primary-500 text-white shadow-soft hover:shadow-medium;
  }
  
  .btn-secondary {
    @apply bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 focus:ring-gray-500 text-gray-900 dark:text-gray-100 shadow-soft hover:shadow-medium;
  }
  
  .btn-outline {
    @apply border-2 border-gray-300 dark:border-gray-500 hover:border-gray-400 dark:hover:border-gray-400 focus:ring-gray-500 text-gray-900 dark:text-gray-100 hover:bg-gray-50 dark:hover:bg-gray-700/50;
  }
  
  /* Modern input styles */
  .input {
    @apply w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200;
  }
  
  /* Modern badge styles */
  .badge {
    @apply inline-flex items-center px-2.5 py-1 rounded-lg text-xs font-medium;
  }
  
  .badge-primary {
    @apply bg-primary-100 text-primary-800 dark:bg-primary-900 dark:text-primary-200;
  }
  
  .badge-success {
    @apply bg-success-100 text-success-800 dark:bg-success-900 dark:text-success-200;
  }
  
  .badge-warning {
    @apply bg-warning-100 text-warning-800 dark:bg-warning-900 dark:text-warning-200;
  }
  
  .badge-error {
    @apply bg-error-100 text-error-800 dark:bg-error-900 dark:text-error-200;
  }
}

/* Custom responsive utilities */
@layer utilities {
  .shadow-soft-hover { @apply transition-shadow hover:shadow-soft; }

  /* Touch-friendly click targets */
  .touch-target {
    min-height: 44px;
    min-width: 44px;
  }
  
  /* Better text truncation for mobile */
  .line-clamp-1 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 1;
  }
  
  .line-clamp-2 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 2;
  }
  
  .line-clamp-3 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 3;
  }
  
  /* Mobile-specific scrollable areas */
  .mobile-scroll {
    -webkit-overflow-scrolling: touch;
    overscroll-behavior: contain;
  }
  
  /* Safe area padding for mobile devices */
  .safe-area-top {
    padding-top: env(safe-area-inset-top);
  }
  
  .safe-area-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }
  
  .safe-area-left {
    padding-left: env(safe-area-inset-left);
  }
  
  .safe-area-right {
    padding-right: env(safe-area-inset-right);
  }
  
  /* Modern glass effect */
  .glass {
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    background: rgba(255, 255, 255, 0.8);
  }
  
  .glass-dark {
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    background: rgba(17, 24, 39, 0.8);
  }
  
  /* Modern gradient backgrounds */
  .gradient-primary {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  }
  
  .gradient-success {
    background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%);
  }
  
  .gradient-warm {
    background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
  }
}

.mobile-sheet-enter-active,
.mobile-sheet-leave-active {
  transition: transform 0.2s ease, opacity 0.2s ease;
}

.mobile-sheet-enter-from,
.mobile-sheet-leave-to {
  opacity: 0;
  transform: translateY(1rem);
}
